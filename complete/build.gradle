task copyClientResources(dependsOn: ':client:build') { //<1>
    group = 'build'
    description = 'Copy client resources into server'

    doFirst {
        copy {
            from project(':client').buildDir.absolutePath
            into "${project(':server').buildDir}/resources/main/public"
        }
    }
}

task assembleServerAndClient(dependsOn: ['copyClientResources', ':server:assemble']) { //<2>
    group = 'build'
    description = 'Build combined server & client JAR'

    doLast {
        println "Built JAR file at ${project(':server').getTasksByName('jar', false).archivePath}"
    }
}

subprojects { //<3>
    tasks.withType(Jar) {
        destinationDir = file("$rootDir/build/")
    }
}